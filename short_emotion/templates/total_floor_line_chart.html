<style>
    .total-floor-draggable-container {
        position: relative;
        width: 1000px;
        max-width: 100%;
        height: 360px;
        border: 1px solid #e0e0e0;
        border-radius: 6px;
    }
    .total-floor-resize-handle {
        position: absolute;
        right: 0;
        bottom: 0;
        width: 15px;
        height: 15px;
        background-color: #ccc;
        cursor: nwse-resize;
        border-radius: 0 0 6px 0;
    }
</style>
<div class="total-floor-draggable-container">
    <div id="total-floor-main" style="width: 100%; height: 100%;"></div>
    <div class="total-floor-resize-handle"></div>
</div>
<script>
(function() {
    var total_floor_main_chart = echarts.init(document.getElementById('total-floor-main'));
    fetch('/short_emotion/total_floor')
        .then(response => response.json())
        .then(data => {
            total_floor_main_chart.setOption({
                title: { text: '连板数量', left: 'center', top: 10 },
                xAxis: { type: 'category', data: data.xAxis },
                yAxis: { type: 'value' },
                legend: { data: data.series.map(s => s.name), orient: 'vertical', right: 5, top: 'center' },
                series: data.series
            });
        });
    var c = document.querySelector('.total-floor-draggable-container');
    var h = document.querySelector('.total-floor-resize-handle');
    var drag = false, x0, y0, w0, h0;
    h.addEventListener('mousedown', function(e) {
        drag = true;
        x0 = e.clientX; y0 = e.clientY;
        w0 = c.offsetWidth; h0 = c.offsetHeight;
    });
    document.addEventListener('mousemove', function(e) {
        if (drag) {
            c.style.width = (w0 + e.clientX - x0) + 'px';
            c.style.height = (h0 + e.clientY - y0) + 'px';
            total_floor_main_chart.resize();
        }
    });
    document.addEventListener('mouseup', function() { drag = false; });
})();
</script>
